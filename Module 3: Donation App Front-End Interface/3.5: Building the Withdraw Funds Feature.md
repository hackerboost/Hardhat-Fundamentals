## Introduction

In this lesson, we’ll implement a withdraw feature for the contract owner. We’ll create a button that allows the owner to withdraw funds from the `DonationContract`, and we’ll display messages to inform the user whether the withdrawal was successful or if there were any errors. We’ll also ensure only the contract owner has access to this feature.

## Step 1: Creating the Withdraw Component

1. **Create a new component** named `WithdrawFunds.js` in the `/components` folder.
2. **Add the following code** to `WithdrawFunds.js`:

   ```javascript
   import React, { useState, useEffect } from 'react';
   import { ethers } from 'ethers';
   import DonationContractABI from '../artifacts/contracts/DonationContract.sol/DonationContract.json';

   const WithdrawFunds = ({ contractAddress }) => {
     const [isOwner, setIsOwner] = useState(false);
     const [transactionStatus, setTransactionStatus] = useState("");

     // Function to check if the connected account is the owner
     const checkIfOwner = async () => {
       if (typeof window.ethereum !== 'undefined') {
         const provider = new ethers.providers.Web3Provider(window.ethereum);
         const signer = provider.getSigner();
         const contract = new ethers.Contract(contractAddress, DonationContractABI.abi, provider);

         try {
           const owner = await contract.owner();
           const userAddress = await signer.getAddress();
           setIsOwner(owner.toLowerCase() === userAddress.toLowerCase());
         } catch (error) {
           console.error("Error checking owner status:", error);
         }
       }
     };

     // Function to handle fund withdrawal
     const handleWithdraw = async () => {
       if (typeof window.ethereum !== 'undefined') {
         const provider = new ethers.providers.Web3Provider(window.ethereum);
         const signer = provider.getSigner();
         const contract = new ethers.Contract(contractAddress, DonationContractABI.abi, signer);

         try {
           setTransactionStatus("Processing withdrawal...");
           const tx = await contract.withdraw();
           await tx.wait();
           setTransactionStatus("Funds withdrawn successfully!");
         } catch (error) {
           console.error("Withdrawal failed:", error);
           setTransactionStatus("Withdrawal failed. Please try again.");
         }
       } else {
         alert("Please install MetaMask to use this feature!");
       }
     };

     // Check if the connected account is the owner when the component mounts
     useEffect(() => {
       checkIfOwner();
     }, []);

     return (
       <div>
         {isOwner ? (
           <div>
             <button onClick={handleWithdraw}>Withdraw Funds</button>
             {transactionStatus && <p>{transactionStatus}</p>}
           </div>
         ) : (
           <p>You are not authorized to withdraw funds.</p>
         )}
       </div>
     );
   };

   export default WithdrawFunds;
   ```

### Explanation
- **State Hooks**:
  - `isOwner`: Determines if the connected account is the contract owner.
  - `transactionStatus`: Displays the status of the withdrawal transaction.
- **Owner Check**: The `checkIfOwner` function uses `ethers.js` to compare the owner’s address stored in the contract with the address of the connected wallet.
- **Withdrawal Functionality**: The `handleWithdraw` function allows the owner to withdraw all funds from the contract. If the transaction is successful, a success message is displayed; otherwise, an error message is shown.

---

## Step 2: Using the Withdraw Component in Your App

1. **Open `pages/withdraw.js`**.
2. **Import and use the `WithdrawFunds` component**:

   ```javascript
   import WithdrawFunds from '../components/WithdrawFunds';

   export default function WithdrawPage() {
     const contractAddress = "0xYourDeployedContractAddress"; // Replace with your contract address

     return (
       <div>
         <h1>Withdraw Funds</h1>
         <WithdrawFunds contractAddress={contractAddress} />
       </div>
     );
   }
   ```

### What This Does
- The `WithdrawFunds` component is displayed on the `/withdraw` page. Only the contract owner will see the "Withdraw Funds" button, while others will see a message indicating they are not authorized.

---

## Step 3: Styling the Withdraw Feature (Optional)

You can add some basic CSS to improve the appearance of the button and messages:

```css
button {
  padding: 10px 15px;
  background-color: #f04e30;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}

button:hover {
  background-color: #d03d27;
}

p {
  font-size: 14px;
  color: green;
  margin-top: 10px;
}

p.error {
  color: red;
}
```

---

## Wrapping Up

You’ve now built a secure and functional withdraw feature for your `DonationContract`. This feature ensures only the contract owner can withdraw funds, providing an added layer of security to your decentralized donation app.

In the next lesson, we’ll enhance the overall user interface and handle additional UX elements like loading spinners and error notifications.